# Rust åç«¯æµ‹è¯•æŒ‡å—

## ğŸ“Š å½“å‰çŠ¶æ€

**æ¶æ„**ï¼šTauri Commands æ¨¡å¼ï¼ˆé›¶ç½‘ç»œå¼€é”€ï¼‰ğŸš€

âœ… **å·²å®Œæˆçš„åŠŸèƒ½**ï¼š
- **åŸºç¡€æ¶æ„**ï¼šDDD æ¶æ„ã€é”™è¯¯å¤„ç†ã€æ—¥å¿—ç³»ç»Ÿ
- **æ•°æ®åº“å±‚**ï¼šSeaORMã€æ•°æ®æ¨¡å‹ã€è‡ªåŠ¨è¿ç§»ã€åŠ å¯†å·¥å…·
- **Tauri Commands**ï¼šé¡¹ç›®ç®¡ç† Commandsï¼ˆå®Œæ•´ CRUDï¼‰

â³ **å¾…å®ç°çš„åŠŸèƒ½**ï¼š
- å­—æ®µç®¡ç† Commands
- AI é…ç½®ç®¡ç† Commands
- æ–‡ä»¶ç®¡ç† Commands
- æ•°æ®å¤„ç† Commands
- ç»“æœç®¡ç† Commands

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨åº”ç”¨

```bash
cd redata-app
npm run tauri:dev
```

è¿™å°†è‡ªåŠ¨ï¼š
1. å¯åŠ¨ Nuxt å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆhttp://localhost:3000ï¼‰
2. ç¼–è¯‘å¹¶è¿è¡Œ Rust åç«¯ï¼ˆTauri Commandsï¼‰
3. åˆå§‹åŒ–æ•°æ®åº“å¹¶è¿è¡Œè¿ç§»
4. æ‰“å¼€æ¡Œé¢åº”ç”¨çª—å£

### æµ‹è¯•é¡¹ç›®ç®¡ç†åŠŸèƒ½

åœ¨åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥ï¼š
- âœ… æŸ¥çœ‹é¡¹ç›®åˆ—è¡¨
- âœ… åˆ›å»ºæ–°é¡¹ç›®
- âœ… ç¼–è¾‘é¡¹ç›®ä¿¡æ¯
- âœ… åˆ é™¤é¡¹ç›®

## æµ‹è¯• Tauri Commands

### æ–¹å¼ 1ï¼šé€šè¿‡å‰ç«¯ UI æµ‹è¯•

ç›´æ¥ä½¿ç”¨åº”ç”¨çš„ UI ç•Œé¢è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ˜¯æœ€ç›´è§‚çš„æ–¹å¼ã€‚

### æ–¹å¼ 2ï¼šé€šè¿‡æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œåœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œï¼š

```javascript
// è·å–é¡¹ç›®åˆ—è¡¨
await window.__TAURI__.core.invoke('get_projects')

// åˆ›å»ºé¡¹ç›®
await window.__TAURI__.core.invoke('create_project', {
  name: 'æµ‹è¯•é¡¹ç›®',
  description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡¹ç›®'
})

// è·å–å•ä¸ªé¡¹ç›®
await window.__TAURI__.core.invoke('get_project', { id: 1 })

// æ›´æ–°é¡¹ç›®
await window.__TAURI__.core.invoke('update_project', {
  id: 1,
  name: 'æ›´æ–°åçš„é¡¹ç›®åç§°',
  description: null,
  dedup_enabled: null,
  dedup_fields: null,
  dedup_strategy: null
})

// åˆ é™¤é¡¹ç›®
await window.__TAURI__.core.invoke('delete_project', { id: 1 })
```

### æ–¹å¼ 3ï¼šé€šè¿‡å‰ç«¯ä»£ç æµ‹è¯•

åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```typescript
import { invoke } from '@tauri-apps/api/core'

// è·å–é¡¹ç›®åˆ—è¡¨
const projects = await invoke<Project[]>('get_projects')

// åˆ›å»ºé¡¹ç›®
const newProject = await invoke<Project>('create_project', {
  name: 'æµ‹è¯•é¡¹ç›®',
  description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡¹ç›®'
})
```

## æ•°æ®åº“

**æ•°æ®åº“æ–‡ä»¶ä½ç½®**ï¼š`redata-app/src-tauri/data/app.db`

Rust åç«¯ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. è¿è¡Œæ‰€æœ‰è¿ç§»è„šæœ¬
3. åˆ›å»ºå¿…è¦çš„è¡¨å’Œç´¢å¼•

**é‡ç½®æ•°æ®åº“**ï¼š
```bash
rm redata-app/src-tauri/data/app.db
npm run tauri:dev  # é‡æ–°å¯åŠ¨åº”ç”¨
```

## å·²å®ç°çš„ Tauri Commands

### é¡¹ç›®ç®¡ç†

| Command | å‚æ•° | è¿”å›å€¼ | çŠ¶æ€ |
|---------|------|--------|------|
| `get_projects` | æ—  | `Project[]` | âœ… |
| `create_project` | `name: string, description?: string` | `Project` | âœ… |
| `get_project` | `id: number` | `Project` | âœ… |
| `update_project` | `id: number, name?: string, description?: string, ...` | `Project` | âœ… |
| `delete_project` | `id: number` | `void` | âœ… |

## å¾…å®ç°çš„åŠŸèƒ½

- [ ] å­—æ®µç®¡ç† Commands
- [ ] AI é…ç½®ç®¡ç† Commands
- [ ] æ–‡ä»¶ç®¡ç† Commands
- [ ] æ•°æ®å¤„ç† Commands
- [ ] ç»“æœç®¡ç† Commands

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### Tauri Commands ğŸš€ï¼ˆå½“å‰æ¶æ„ï¼‰
- **é€šä¿¡å»¶è¿Ÿ**ï¼š0msï¼ˆç›´æ¥å‡½æ•°è°ƒç”¨ï¼‰
- **å¯åŠ¨æ—¶é—´**ï¼š~1 ç§’
- **å†…å­˜å ç”¨**ï¼š~10 MB
- **æ¶æ„å¤æ‚åº¦**ï¼šç®€å•ï¼ˆæ— éœ€ HTTP æœåŠ¡å™¨ï¼‰
- **ç±»å‹å®‰å…¨**ï¼šå®Œå…¨ç±»å‹å®‰å…¨ï¼ˆRust + TypeScriptï¼‰

### HTTP APIï¼ˆæ—§æ¶æ„ï¼‰
- **é€šä¿¡å»¶è¿Ÿ**ï¼š~1-5msï¼ˆç½‘ç»œè¯·æ±‚ï¼‰
- **å¯åŠ¨æ—¶é—´**ï¼š~2-3 ç§’
- **å†…å­˜å ç”¨**ï¼š~15-20 MB
- **æ¶æ„å¤æ‚åº¦**ï¼šå¤æ‚ï¼ˆéœ€è¦ç®¡ç† HTTP æœåŠ¡å™¨ï¼‰
- **ç±»å‹å®‰å…¨**ï¼šéœ€è¦æ‰‹åŠ¨ç»´æŠ¤

### æ€§èƒ½æå‡
- **é€šä¿¡å»¶è¿Ÿ**ï¼š**100% æ¶ˆé™¤**ï¼ˆé›¶ç½‘ç»œå¼€é”€ï¼‰
- **å¯åŠ¨é€Ÿåº¦**ï¼š**2-3x æ›´å¿«**
- **å†…å­˜å ç”¨**ï¼š**30-50% æ›´å°‘**
- **æ¶æ„å¤æ‚åº¦**ï¼š**æ˜¾è‘—é™ä½**

## æ•…éšœæ’é™¤

### ç¼–è¯‘é”™è¯¯

ç¡®ä¿ Rust å·¥å…·é“¾æ˜¯æœ€æ–°çš„ï¼š

```bash
rustup update
```

### æ•°æ®åº“é”å®š

å¦‚æœé‡åˆ°æ•°æ®åº“é”å®šé”™è¯¯ï¼Œç¡®ä¿æ²¡æœ‰å…¶ä»–è¿›ç¨‹åœ¨ä½¿ç”¨æ•°æ®åº“æ–‡ä»¶ï¼š

```bash
# æŸ¥æ‰¾å ç”¨æ•°æ®åº“çš„è¿›ç¨‹
lsof redata-app/src-tauri/data/app.db

# æˆ–è€…ç›´æ¥åˆ é™¤æ•°æ®åº“é‡æ–°å¼€å§‹
rm redata-app/src-tauri/data/app.db
```

### å‰ç«¯æ— æ³•è°ƒç”¨ Commands

æ£€æŸ¥ï¼š
1. Commands æ˜¯å¦åœ¨ `lib.rs` ä¸­æ­£ç¡®æ³¨å†Œ
2. å‰ç«¯æ˜¯å¦æ­£ç¡®å¯¼å…¥ `@tauri-apps/api/core`
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### åº”ç”¨å¯åŠ¨å¤±è´¥

æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼Œæ£€æŸ¥ï¼š
1. æ•°æ®åº“è¿æ¥æ˜¯å¦æˆåŠŸ
2. æ•°æ®åº“è¿ç§»æ˜¯å¦å®Œæˆ
3. æ˜¯å¦æœ‰ Rust ç¼–è¯‘é”™è¯¯

## æ—¥å¿—

Rust åç«¯ä½¿ç”¨ `tracing` è¿›è¡Œæ—¥å¿—è®°å½•ã€‚æ—¥å¿—çº§åˆ«å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶ï¼š

```bash
RUST_LOG=debug npm run tauri:dev
```

æ—¥å¿—çº§åˆ«ï¼š
- `error`: ä»…é”™è¯¯
- `warn`: è­¦å‘Šå’Œé”™è¯¯
- `info`: ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ï¼ˆé»˜è®¤ï¼‰
- `debug`: è°ƒè¯•ä¿¡æ¯
- `trace`: è¯¦ç»†è·Ÿè¸ªä¿¡æ¯

## å¼€å‘å·¥ä½œæµ

### 1. ä¿®æ”¹ Rust ä»£ç 

ç¼–è¾‘ `src-tauri/src/` ä¸‹çš„æ–‡ä»¶ã€‚

### 2. çƒ­é‡è½½

Tauri ä¼šè‡ªåŠ¨æ£€æµ‹ Rust ä»£ç å˜æ›´å¹¶é‡æ–°ç¼–è¯‘ã€‚

### 3. æµ‹è¯•

é€šè¿‡å‰ç«¯ UI æˆ–æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•æ–°åŠŸèƒ½ã€‚

### 4. æäº¤

```bash
git add .
git commit -m "feat: å®ç° XXX åŠŸèƒ½"
```

## ä¸‹ä¸€æ­¥

1. âœ… æµ‹è¯•é¡¹ç›®ç®¡ç†åŠŸèƒ½
2. â³ å®ç°å­—æ®µç®¡ç† Commands
3. â³ å®ç° AI é…ç½®ç®¡ç† Commands
4. â³ å®ç°æ–‡ä»¶ç®¡ç† Commands
5. â³ å®ç°æ•°æ®å¤„ç† Commands
6. â³ å®ç°ç»“æœç®¡ç† Commands

## æ¶æ„ä¼˜åŠ¿

**Tauri Commands vs HTTP API**ï¼š

| ç‰¹æ€§ | Tauri Commands | HTTP API |
|------|----------------|----------|
| ç½‘ç»œå¼€é”€ | âœ… æ—  | âŒ æœ‰ |
| åºåˆ—åŒ–å¼€é”€ | âœ… æœ€å° | âŒ æ˜¾è‘— |
| ç±»å‹å®‰å…¨ | âœ… å®Œå…¨ | âš ï¸ éƒ¨åˆ† |
| æ¶æ„å¤æ‚åº¦ | âœ… ç®€å• | âŒ å¤æ‚ |
| è°ƒè¯•éš¾åº¦ | âœ… å®¹æ˜“ | âš ï¸ ä¸­ç­‰ |
| æ€§èƒ½ | âœ… æœ€ä¼˜ | âš ï¸ è‰¯å¥½ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æ›´æ–°æ—¥æœŸ**: 2026-02-18
**æ¶æ„**: Tauri Commandsï¼ˆv2.5.0ï¼‰
