# 智能数据处理平台 - 界面设计

> **文档说明**: 本文档是 prd.md 第 6 章"用户界面设计要求"的详细实现版本。业务需求和功能定义请参考 prd.md。

## 1. 整体布局

### 1.1 应用主框架（首页 - 项目列表）

```
┌─────────────────────────────────────────────────────────────────────┐
│  reData - 智能数据处理平台                               [_] [□] [×] │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────┬─────────┐                                              │
│  │ 项目列表 │ 设置    │                                              │
│  └─────────┴─────────┘                                              │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│                                                                     │
│                        [项目列表内容]                                │
│                                                                     │
│                                                                     │
│                                                                     │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  状态栏: 共 5 个项目 | 总记录数: 22,589 | 版本: v2.0.0              │
└─────────────────────────────────────────────────────────────────────┘
```

### 1.2 应用主框架（项目详情页）

```
┌─────────────────────────────────────────────────────────────────────┐
│  reData - 智能数据处理平台                               [_] [□] [×] │
├─────────────────────────────────────────────────────────────────────┤
│  [← 返回项目列表]  当前项目: 客户信息提取  [字段定义]               │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────┬─────────┬─────────┐                                   │
│  │ 数据结果 │ 数据处理 │ 项目设置 │                                   │
│  └─────────┴─────────┴─────────┘                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│                                                                     │
│                        [页面内容区域]                                │
│                                                                     │
│                                                                     │
│                                                                     │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  状态栏: 项目: 客户信息提取 | 记录数: 12,345 | 最后更新: 2小时前    │
└─────────────────────────────────────────────────────────────────────┘
```

**架构说明**：
- **首页**：项目列表页，显示所有项目
- **项目详情页**：点击项目后进入，包含三个子页面（按优先级排序）
  - 数据结果（默认页）：查看和管理提取的数据
  - 数据处理：导入和处理 Excel 文件
  - 项目设置：配置字段定义和去重规则
- **全局设置页**：AI 配置等全局设置

**导航逻辑**：
1. 用户在首页看到所有项目
2. 点击"打开项目"进入项目详情页，默认显示"数据结果"页
3. 在项目详情页内切换"数据结果"、"数据处理"、"项目设置"
4. 点击"返回项目列表"回到首页

**设计理由**：
- 用户打开项目后，首先关心的是已有的数据结果
- "数据结果"作为默认页，方便快速查看和管理数据
- "数据处理"作为操作性功能，按需使用

## 2. 项目列表页（首页 - ProjectListView）

### 2.1 项目列表（卡片式布局）

```
┌─────────────────────────────────────────────────────────────────────┐
│  我的项目                                                            │
├─────────────────────────────────────────────────────────────────────┤
│  [+ 新建项目]  [从模板创建]  [导入配置]                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────┬────────────────────────┬──────────────┐  │
│  │  📁 客户信息提取       │  📁 员工信息管理       │  📁 供应商联 │  │
│  │  ─────────────────────│  ─────────────────────│  ───────────│  │
│  │  提取客户姓名、手机号  │  提取员工工号、姓名、  │  提取供应商名│  │
│  │  公司、地区、邮箱      │  部门、职位、入职日期  │  称、联系人、│  │
│  │                        │                        │  电话、地址  │  │
│  │  字段: 5 个            │  字段: 5 个            │  字段: 4 个  │  │
│  │  记录: 12,345 条       │  记录: 3,456 条        │  记录: 890 条│  │
│  │  去重: ✓ 按手机号      │  去重: ✓ 按工号        │  去重: ✗     │  │
│  │                        │                        │              │  │
│  │  最后更新: 2小时前     │  最后更新: 1天前       │  最后更新: 3天│  │
│  │                        │                        │  前          │  │
│  │  [打开] [字段] [编辑]  │  [打开] [字段] [编辑]  │  [打开] [字段│  │
│  │  [导出] [删除]         │  [导出] [删除]         │  ] [编辑]    │  │
│  └────────────────────────┴────────────────────────┴──────────────┘  │
│                                                                     │
│  ┌────────────────────────┬────────────────────────┬──────────────┐  │
│  │  📁 产品信息录入       │  📁 会议记录整理       │  + 新建项目  │  │
│  │  ─────────────────────│  ─────────────────────│              │  │
│  │  提取产品名称、型号、  │  提取会议主题、参与人  │              │  │
│  │  价格、库存            │  时间、地点、决议      │              │  │
│  │                        │                        │              │  │
│  │  字段: 4 个            │  字段: 5 个            │              │  │
│  │  记录: 5,678 条        │  记录: 234 条          │              │  │
│  │  去重: ✓ 按产品型号    │  去重: ✗               │              │  │
│  │                        │                        │              │  │
│  │  最后更新: 1周前       │  最后更新: 2周前       │              │  │
│  │                        │                        │              │  │
│  │  [打开] [字段] [编辑]  │  [打开] [字段] [编辑]  │              │  │
│  │  [导出] [删除]         │  [导出] [删除]         │              │  │
│  └────────────────────────┴────────────────────────┴──────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

**交互说明**：
- 卡片式布局，每行显示 3 个项目
- 点击"打开"按钮切换到该项目并进入处理界面
- 点击"字段"按钮打开字段定义页面
- 点击"编辑"按钮编辑项目信息
- 点击"导出"按钮导出项目配置
- 点击"删除"按钮删除项目（需确认）
- 最后一个卡片是"新建项目"快捷入口

### 2.2 项目卡片详细设计

```
┌────────────────────────────────────┐
│  📁 客户信息提取          [当前]  │
│  ─────────────────────────────────│
│  描述: 提取客户姓名、手机号、公司 │
│        地区、邮箱                 │
│                                   │
│  ┌─────────────────────────────┐  │
│  │ 字段数: 5                   │  │
│  │ 记录数: 12,345              │  │
│  │ 去重: ✓ 按手机号            │  │
│  │ 创建: 2024-02-01            │  │
│  │ 更新: 2小时前               │  │
│  └─────────────────────────────┘  │
│                                   │
│  [打开项目] [字段定义]            │
│  [编辑信息] [导出配置] [删除]     │
└────────────────────────────────────┘
```

### 2.3 空状态（无项目时）

```
┌─────────────────────────────────────────────────────────────────────┐
│  我的项目                                                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│                                                                     │
│                          📂                                         │
│                                                                     │
│                    还没有任何项目                                    │
│                                                                     │
│              创建第一个项目开始使用 reData                           │
│                                                                     │
│                                                                     │
│              ┌─────────────────────────┐                           │
│              │   [+ 新建项目]          │                           │
│              └─────────────────────────┘                           │
│                                                                     │
│              ┌─────────────────────────┐                           │
│              │   [使用默认模板]        │                           │
│              └─────────────────────────┘                           │
│                                                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## 3. 项目详情页 - 项目设置（ProjectSettingsView）

### 3.1 项目信息编辑

```
┌─────────────────────────────────────────────────────────────────────┐
│  项目设置 - 客户信息提取                                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  基本信息                                                     │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │  项目名称:  [客户信息提取_________________]                  │  │
│  │                                                              │  │
│  │  项目描述:  [提取客户姓名、手机号、公司、地区、邮箱_______]  │  │
│  │             [_________________________________________]       │  │
│  │                                                              │  │
│  │  创建时间:  2024-02-01 10:30:25                              │  │
│  │  最后更新:  2024-02-16 14:20:15                              │  │
│  │                                                              │  │
│  │  [保存] [取消]                                               │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  字段定义                                    [编辑字段定义]   │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │  当前定义了 5 个字段:                                        │  │
│  │  • 姓名 (必填) - 支持中文、英文、带称呼                      │  │
│  │  • 手机号 (必填) - 11位数字手机号                           │  │
│  │  • 公司 - 完整公司名称                                       │  │
│  │  • 地区 - 省/市级别                                          │  │
│  │  • 邮箱 - 标准邮箱格式                                       │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  去重配置                                                     │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │  ☑ 启用去重                                                  │  │
│  │  去重字段: ☑ phone  ☐ email  ☐ name                         │  │
│  │  去重策略: ⦿ 跳过重复  ○ 更新已存在  ○ 保留标记             │  │
│  │                                                              │  │
│  │  [保存配置]                                                  │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  数据统计                                                     │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │  总记录数: 12,345                                            │  │
│  │  今日新增: 3,456                                             │  │
│  │  本周新增: 8,900                                             │  │
│  │  最后处理: 2小时前                                           │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  危险操作                                                     │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │  [导出项目配置]  [清空所有数据]  [删除项目]                 │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

## 3-旧. 项目管理界面（已废弃 - 功能已整合到项目列表页和项目设置）

### 2.1 项目列表

```
┌─────────────────────────────────────────────────────────────────────┐
│  项目管理                                                            │
├─────────────────────────────────────────────────────────────────────┤
│  [+ 新建项目]  [从模板创建]  [导入配置]                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  📁 客户信息提取                                  [当前项目]  │  │
│  │  ─────────────────────────────────────────────────────────── │  │
│  │  描述: 提取客户姓名、手机号、公司、地区、邮箱                │  │
│  │  字段数: 5  |  记录数: 12,345  |  去重: 启用(按手机号)        │  │
│  │  创建时间: 2024-02-01  |  最后更新: 2024-02-13               │  │
│  │                                                              │  │
│  │  [切换] [字段定义] [编辑] [导出配置] [删除]                  │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  📁 员工信息管理                                              │  │
│  │  ─────────────────────────────────────────────────────────── │  │
│  │  描述: 提取员工工号、姓名、部门、职位、入职日期              │  │
│  │  字段数: 5  |  记录数: 3,456  |  去重: 启用(按工号)          │  │
│  │  创建时间: 2024-01-15  |  最后更新: 2024-02-10               │  │
│  │                                                              │  │
│  │  [切换] [字段定义] [编辑] [导出配置] [删除]                  │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  📁 供应商联系方式                                            │  │
│  │  ─────────────────────────────────────────────────────────── │  │
│  │  描述: 提取供应商名称、联系人、电话、地址                    │  │
│  │  字段数: 4  |  记录数: 890  |  去重: 禁用                    │  │
│  │  创建时间: 2024-02-05  |  最后更新: 2024-02-12               │  │
│  │                                                              │  │
│  │  [切换] [字段定义] [编辑] [导出配置] [删除]                  │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 新建项目对话框

```
┌─────────────────────────────────────────────────────────┐
│  新建项目                                        [×]    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  选择创建方式:                                          │
│  ⦿ 使用默认模板 (客户信息提取)                         │
│  ○ 从空白项目开始                                       │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 默认模板包含以下字段:                             │  │
│  │ - 姓名 (必填)                                     │  │
│  │ - 手机号 (必填)                                   │  │
│  │ - 公司                                            │  │
│  │ - 地区                                            │  │
│  │ - 邮箱                                            │  │
│  │                                                   │  │
│  │ 去重配置: 启用, 按手机号去重                      │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  项目名称:  [___________________________]               │
│                                                         │
│  项目描述:  [___________________________]               │
│             [___________________________]               │
│                                                         │
│  ┌─────────────┐  ┌─────────────┐                     │
│  │   [创建]    │  │   [取消]    │                     │
│  └─────────────┘  └─────────────┘                     │
└─────────────────────────────────────────────────────────┘
```

## 3. 字段定义界面（FieldDefinitionView）

### 3.1 字段编辑器（类 Excel 表格）

```
┌─────────────────────────────────────────────────────────────────────┐
│  字段定义 - 客户信息提取                                             │
├─────────────────────────────────────────────────────────────────────┤
│  [+ 添加字段] [从模板导入] [保存配置] [预览 Prompt]                 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ ☰ │字段名称│显示名称│类型  │必填│验证规则      │AI提取提示  │  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │ ≡ │ name   │ 姓名   │ 文本 │ ✓  │              │支持中文、英│  │
│  │   │        │        │      │    │              │文、带称呼  │  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │ ≡ │ phone  │ 手机号 │ 手机 │ ✓  │^1[3-9]\d{9}$ │11位数字手机│  │
│  │   │        │        │      │    │              │号          │  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │ ≡ │ company│ 公司   │ 文本 │    │              │完整公司名称│  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │ ≡ │ region │ 地区   │ 文本 │    │              │省/市级别   │  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │ ≡ │ email  │ 邮箱   │ 邮箱 │    │              │标准邮箱格式│  │
│  ├───┼────────┼────────┼──────┼────┼──────────────┼────────────┤  │
│  │   │ [点击添加新字段...]                                      │  │
│  └──────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  去重配置:                                                           │
│  ☑ 启用去重                                                         │
│  去重字段: ☑ phone  ☐ email  ☐ name                                │
│  去重策略: ⦿ 跳过重复  ○ 更新已存在  ○ 保留标记                     │
├─────────────────────────────────────────────────────────────────────┤
│  字段类型说明:                                                       │
│  • 文本: 任意文本内容                                                │
│  • 数字: 纯数字                                                      │
│  • 手机: 11位手机号                                                  │
│  • 邮箱: 标准邮箱格式                                                │
│  • 日期: 日期格式                                                    │
│  • URL: 网址格式                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**交互说明**：
- 点击单元格直接编辑
- 拖拽 ☰ 图标可以调整字段顺序
- 点击"+ 添加字段"在末尾添加新行
- 支持键盘导航（Tab、Enter、方向键）
- 实时保存（自动保存草稿）

### 3.2 字段编辑对话框（双击行打开）

```
┌─────────────────────────────────────────────────────────┐
│  编辑字段 - 姓名                                 [×]    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  字段名称:  [name_________________]                     │
│             (数据库字段名，建议使用英文)                │
│                                                         │
│  显示名称:  [姓名__________________]                    │
│             (界面显示名称)                              │
│                                                         │
│  字段类型:  [文本 ▼]                                    │
│             ├ 文本                                      │
│             ├ 数字                                      │
│             ├ 手机                                      │
│             ├ 邮箱                                      │
│             ├ 日期                                      │
│             └ URL                                       │
│                                                         │
│  ☑ 必填字段                                             │
│                                                         │
│  验证规则:  [_______________________]                   │
│             (正则表达式，选填)                          │
│             [常用规则 ▼]                                │
│                                                         │
│  AI 提取提示:                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 支持中文姓名、英文姓名、带称呼的姓名（如李先生、  │  │
│  │ 王总、张经理）                                    │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─────────────┐  ┌─────────────┐                     │
│  │   [保存]    │  │   [取消]    │                     │
│  └─────────────┘  └─────────────┘                     │
└─────────────────────────────────────────────────────────┘
```

### 3.3 预览 Prompt 对话框

```
┌─────────────────────────────────────────────────────────────────┐
│  AI Prompt 预览                                          [×]    │
├─────────────────────────────────────────────────────────────────┤
│  根据当前字段定义，系统将生成以下 AI Prompt:                    │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 你是一个数据提取专家。请从以下数据中提取指定字段：        │  │
│  │                                                           │  │
│  │ 原始数据：                                                │  │
│  │ [行数据]                                                  │  │
│  │                                                           │  │
│  │ 请提取以下字段：                                          │  │
│  │ - 【必填】姓名: 支持中文姓名、英文姓名、带称呼的姓名     │  │
│  │ - 【必填】手机号: 11位数字手机号                         │  │
│  │ - 公司: 完整公司名称                                      │  │
│  │ - 地区: 省/市级别                                         │  │
│  │ - 邮箱: 标准邮箱格式                                      │  │
│  │                                                           │  │
│  │ 请以 JSON 格式返回：                                      │  │
│  │ {                                                         │  │
│  │   "name": "提取的姓名",                                   │  │
│  │   "phone": "提取的手机号",                                │  │
│  │   "company": "提取的公司",                                │  │
│  │   "region": "提取的地区",                                 │  │
│  │   "email": "提取的邮箱"                                   │  │
│  │ }                                                         │  │
│  │                                                           │  │
│  │ 如果某个字段无法提取，请返回空字符串。                    │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐                             │
│  │ [复制Prompt]│  │   [关闭]    │                             │
│  └─────────────┘  └─────────────┘                             │
└─────────────────────────────────────────────────────────────────┘
```

## 5. 项目详情页 - 数据处理（ProcessingView）

### 5.1 整体布局

```
┌─────────────────────────────────────────────────────────────────────┐
│  数据处理 - 客户信息提取                                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  [选择文件] [选择文件夹] [开始处理] [暂停] [取消]            │  │
│  │  提取字段: 姓名、手机号、公司、地区、邮箱 (共 5 个字段)      │  │
│  └──────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────┬──────────────────────────────────────────┐  │
│  │  文件列表        │  处理详情                                 │  │
│  │  (左侧 30%)      │  (右侧 70%)                               │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  │                  │                                            │  │
│  └──────────────────┴──────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

**说明**：
- 这是项目详情页的"数据处理"子页面
- 只显示当前项目的处理任务
- 根据当前项目的字段定义显示提取字段

### 4.2 左侧 - 文件列表区域

```
┌──────────────────────────────────────┐
│  处理中的文件 (3)                     │
├──────────────────────────────────────┤
│  ┌────────────────────────────────┐  │
│  │ 📄 客户数据_2024.xlsx          │  │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │  │
│  │ 进度: 1,234 / 5,000 (24.7%)    │  │
│  │ 状态: 处理中                   │  │
│  │ 成功: 1,180 | 失败: 54         │  │
│  │ 速度: 120 行/分钟              │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ 📄 联系人列表.xlsx             │  │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │  │
│  │ 进度: 3,456 / 3,456 (100%)     │  │
│  │ 状态: 已完成 ✓                │  │
│  │ 成功: 3,400 | 失败: 56         │  │
│  │ 用时: 28 分钟                  │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ 📄 企业信息汇总.xlsx           │  │
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │  │
│  │ 进度: 0 / 8,900 (0%)           │  │
│  │ 状态: 等待中                   │  │
│  │                                │  │
│  └────────────────────────────────┘  │
│                                      │
│  [清空已完成]  [查看历史]            │
└──────────────────────────────────────┘
```

### 4.3 右侧 - 处理详情区域

```
┌──────────────────────────────────────────────────────────────────┐
│  客户数据_2024.xlsx - Sheet1                                      │
├──────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────┬───────────────────────────────┐  │
│  │  Sheet 预览 (50%)          │  当前行提取结果 (50%)         │  │
│  ├────────────────────────────┼───────────────────────────────┤  │
│  │                            │                               │  │
│  │  ┌──────────────────────┐  │  ┌─────────────────────────┐  │  │
│  │  │ 表头: 第 2 行        │  │  │ 正在处理: 第 1,234 行   │  │  │
│  │  └──────────────────────┘  │  └─────────────────────────┘  │  │
│  │                            │                               │  │
│  │  ┌──────────────────────┐  │  ┌─────────────────────────┐  │  │
│  │  │ 序号│姓名│电话│公司 │  │  │ 原始数据:               │  │  │
│  │  ├─────┼────┼────┼─────┤  │  │ ─────────────────────── │  │  │
│  │  │  1  │张三│1380│XX公 │  │  │ 姓名: 李四              │  │  │
│  │  │  2  │李四│1390│YY公 │  │  │ 联系方式: 13912345678   │  │  │
│  │  │ >>> │王五│1381│ZZ公 │  │  │ 工作单位: ABC科技公司   │  │  │
│  │  │  4  │赵六│1392│AA公 │  │  │ 所在地: 北京市朝阳区    │  │  │
│  │  │  5  │孙七│1383│BB公 │  │  └─────────────────────────┘  │  │
│  │  │ ... │... │... │...  │  │                               │  │
│  │  └──────────────────────┘  │  ┌─────────────────────────┐  │  │
│  │                            │  │ 提取结果:               │  │  │
│  │  当前 Sheet: Sheet1        │  │ ─────────────────────── │  │  │
│  │  总行数: 5,000             │  │ ✓ 姓名: 李四            │  │  │
│  │  已处理: 1,234             │  │ ✓ 手机号: 13912345678   │  │  │
│  │  剩余: 3,766               │  │ ✓ 公司: ABC科技公司     │  │  │
│  │                            │  │ ✓ 地区: 北京市          │  │  │
│  │  [上一行] [下一行]         │  │ ✓ 邮箱: (未提取)        │  │  │
│  │  [跳转到行号: ____]        │  │                         │  │  │
│  │                            │  │ 状态: 提取成功 ✓        │  │  │
│  │                            │  │ 用时: 0.8 秒            │  │  │
│  │                            │  └─────────────────────────┘  │  │
│  └────────────────────────────┴───────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  Sheet 切换: [Sheet1] [Sheet2] [Sheet3]                   │  │
│  └────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
```

**关键变化**：
- 提取结果根据项目字段定义动态显示
- 显示所有定义的字段，包括未提取到的字段

## 5. 结果页面（ResultView）

### 5.1 整体布局（动态列显示）

```
┌─────────────────────────────────────────────────────────────────────┐
│  结果页面 - 客户信息提取                                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  搜索: [___________] [🔍]  筛选: [来源文件▼] [批次▼] [日期▼]│  │
│  │  [导出 Excel] [导出 CSV] [批量删除] [刷新]                   │  │
│  └──────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  统计信息:                                                    │  │
│  │  总记录数: 12,345  |  今日新增: 3,456  |  本周新增: 8,900    │  │
│  └──────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ ☑ │ ID  │ 姓名 │ 手机号      │ 公司        │ 地区   │ 邮箱  │操作│  │
│  ├───┼─────┼──────┼─────────────┼─────────────┼────────┼───────┼───┤  │
│  │ ☑ │ 001 │ 张三 │ 13800138000 │ XX科技公司  │ 北京市 │zhang@│编辑│  │
│  │ ☑ │ 002 │ 李四 │ 13900139000 │ YY网络公司  │ 上海市 │li@   │编辑│  │
│  │ ☑ │ 003 │ 王五 │ 13700137000 │ ZZ软件公司  │ 深圳市 │wang@ │编辑│  │
│  │ ☑ │ 004 │ 赵六 │ 13600136000 │ AA信息公司  │ 广州市 │zhao@ │编辑│  │
│  │ ☑ │ 005 │ 孙七 │ 13500135000 │ BB数据公司  │ 杭州市 │sun@  │编辑│  │
│  │ ☑ │ 006 │ 周八 │ 13400134000 │ CC云计算    │ 成都市 │zhou@ │编辑│  │
│  │ ☑ │ 007 │ 吴九 │ 13300133000 │ DD智能科技  │ 武汉市 │wu@   │编辑│  │
│  │ ☑ │ 008 │ 郑十 │ 13200132000 │ EE大数据    │ 西安市 │zheng@│编辑│  │
│  │ ... │ ... │ ...  │ ...         │ ...         │ ...    │ ...  │... │  │
│  └──────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  [<< 首页] [< 上一页] 第 1 / 247 页 [下一页 >] [末页 >>]    │  │
│  │  每页显示: [50▼] 条  跳转到: [___] 页 [Go]                  │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

**关键变化**：
- 标题显示当前项目名称
- 表格列根据项目字段定义动态生成
- 列顺序与字段定义中的显示顺序一致

### 5.2 编辑对话框（动态字段）

```
┌─────────────────────────────────────────────┐
│  编辑记录 #001 - 客户信息提取        [×]    │
├─────────────────────────────────────────────┤
│                                             │
│  姓名:     [张三___________________]        │
│                                             │
│  手机号:   [13800138000____________]        │
│                                             │
│  公司:     [XX科技公司_____________]        │
│                                             │
│  地区:     [北京市_________________]        │
│                                             │
│  邮箱:     [zhang@example.com______]        │
│                                             │
│  ┌───────────────────────────────────────┐  │
│  │ 原始内容:                             │  │
│  │ ───────────────────────────────────── │  │
│  │ 姓名: 张三                            │  │
│  │ 联系电话: 13800138000                 │  │
│  │ 工作单位: XX科技有限公司              │  │
│  │ 地址: 北京市朝阳区XX路XX号            │  │
│  │ 邮箱: zhang@example.com               │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  来源文件: 客户数据_2024.xlsx               │
│  来源 Sheet: Sheet1                         │
│  行号: 123                                  │
│  批次: batch_001                            │
│  处理时间: 2024-02-13 14:30:25              │
│                                             │
│  ┌─────────────┐  ┌─────────────┐          │
│  │   [保存]    │  │   [取消]    │          │
│  └─────────────┘  └─────────────┘          │
└─────────────────────────────────────────────┘
```

**关键变化**：
- 编辑表单根据项目字段定义动态生成
- 字段顺序与定义一致
- 显示字段的显示名称（中文）

## 4. 设置页面（SettingsView）

### 4.1 AI 配置管理

```
┌─────────────────────────────────────────────────────────────────────┐
│  设置                                                                │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┬───────────────────────────────────────────────┐   │
│  │  通用设置   │                                               │   │
│  │  AI 配置    │  AI 模型配置                                  │   │
│  │  提取字段   │  ─────────────────────────────────────────── │   │
│  │  数据管理   │                                               │   │
│  │  关于       │  [+ 添加新配置]                               │   │
│  │             │                                               │   │
│  │             │  ┌─────────────────────────────────────────┐  │   │
│  │             │  │ ⭐ OpenAI GPT-4 (默认)          [编辑]  │  │   │
│  │             │  │ ─────────────────────────────────────── │  │   │
│  │             │  │ API URL: https://api.openai.com/v1     │  │   │
│  │             │  │ Model: gpt-4-turbo                     │  │   │
│  │             │  │ API Key: sk-**********************     │  │   │
│  │             │  │ 温度: 0.7  |  最大 Token: 1000         │  │   │
│  │             │  │                                         │  │   │
│  │             │  │ [设为默认] [测试连接] [删除]           │  │   │
│  │             │  └─────────────────────────────────────────┘  │   │
│  │             │                                               │   │
│  │             │  ┌─────────────────────────────────────────┐  │   │
│  │             │  │ Claude Opus                     [编辑]  │  │   │
│  │             │  │ ─────────────────────────────────────── │  │   │
│  │             │  │ API URL: https://api.anthropic.com     │  │   │
│  │             │  │ Model: claude-opus-4                   │  │   │
│  │             │  │ API Key: sk-**********************     │  │   │
│  │             │  │ 温度: 0.5  |  最大 Token: 2000         │  │   │
│  │             │  │                                         │  │   │
│  │             │  │ [设为默认] [测试连接] [删除]           │  │   │
│  │             │  └─────────────────────────────────────────┘  │   │
│  │             │                                               │   │
│  │             │  ┌─────────────────────────────────────────┐  │   │
│  │             │  │ 本地模型 (Ollama)               [编辑]  │  │   │
│  │             │  │ ─────────────────────────────────────── │  │   │
│  │             │  │ API URL: http://localhost:11434        │  │   │
│  │             │  │ Model: qwen2.5:14b                     │  │   │
│  │             │  │ API Key: (无需)                        │  │   │
│  │             │  │ 温度: 0.8  |  最大 Token: 1500         │  │   │
│  │             │  │                                         │  │   │
│  │             │  │ [设为默认] [测试连接] [删除]           │  │   │
│  │             │  └─────────────────────────────────────────┘  │   │
│  └─────────────┴───────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 添加/编辑配置对话框

```
┌─────────────────────────────────────────────────────────┐
│  添加 AI 配置                                    [×]    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  配置名称:  [OpenAI GPT-4_________________]             │
│                                                         │
│  API URL:   [https://api.openai.com/v1___]             │
│                                                         │
│  模型名称:  [gpt-4-turbo__________________]             │
│                                                         │
│  API Key:   [sk-**********************____]             │
│             [显示] [从环境变量读取]                     │
│                                                         │
│  温度:      [0.7___] (0.0 - 2.0)                        │
│             ├─────────●─────────────────┤               │
│                                                         │
│  最大 Token: [1000__] (100 - 4000)                      │
│             ├─────────●─────────────────┤               │
│                                                         │
│  ☑ 设为默认配置                                         │
│                                                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │ [测试连接]  │  │   [保存]    │  │   [取消]    │    │
│  └─────────────┘  └─────────────┘  └─────────────┘    │
└─────────────────────────────────────────────────────────┘
```

## 5. 数据流程图

### 5.1 文件处理流程

> **说明**: 本流程图是 prd.md 第 3.1 章主流程的技术实现细化版本。

```
┌──────────┐
│ 用户选择 │
│ 文件/文件夹│
└────┬─────┘
     │
     ▼
┌──────────────────┐
│ 复制到 history/  │
│ batch_XXX/ 目录  │
└────┬─────────────┘
     │
     ▼
┌──────────────────┐
│ 创建处理任务     │
│ (Task ID)        │
└────┬─────────────┘
     │
     ▼
┌──────────────────┐
│ 遍历每个文件     │
└────┬─────────────┘
     │
     ▼
┌──────────────────┐
│ 遍历每个 Sheet   │
└────┬─────────────┘
     │
     ├─────────────────────────────┐
     │                             │
     ▼                             ▼
┌──────────────┐            ┌──────────────┐
│ 读取前 5 行  │            │ 从表头下一行 │
│              │            │ 开始逐行处理 │
└────┬─────────┘            └────┬─────────┘
     │                           │
     ▼                           ▼
┌──────────────┐            ┌──────────────┐
│ AI 识别表头  │            │ 组装数据格式 │
│ 返回行号     │            │ 表头:值      │
└────┬─────────┘            └────┬─────────┘
     │                           │
     │                           ▼
     │                      ┌──────────────┐
     │                      │ AI 提取字段  │
     │                      │ 姓名/手机等  │
     │                      └────┬─────────┘
     │                           │
     │                           ▼
     │                      ┌──────────────┐
     │                      │ 检查手机号   │
     │                      │ 是否重复     │
     │                      └────┬─────────┘
     │                           │
     │                           ▼
     │                      ┌──────────────┐
     │                      │ 插入数据库   │
     │                      │ (去重)       │
     │                      └────┬─────────┘
     │                           │
     │                           ▼
     │                      ┌──────────────┐
     │                      │ 发送进度事件 │
     │                      │ 到前端       │
     │                      └────┬─────────┘
     │                           │
     └───────────────────────────┘
                                 │
                                 ▼
                            ┌──────────┐
                            │ 处理完成 │
                            └──────────┘
```

## 6. 组件交互关系

### 6.1 前端组件树

```
App.vue
│
├── Router
│   │
│   ├── ProcessingView.vue (处理界面)
│   │   │
│   │   ├── FileList.vue (文件列表)
│   │   │   └── FileItem.vue (单个文件项)
│   │   │       └── ProgressBar.vue (进度条)
│   │   │
│   │   └── ProcessingDetail.vue (处理详情)
│   │       │
│   │       ├── SheetPreview.vue (Sheet 预览)
│   │       │   └── DataTable.vue (数据表格)
│   │       │
│   │       └── ExtractionResult.vue (提取结果)
│   │           ├── RawData.vue (原始数据)
│   │           └── ExtractedFields.vue (提取字段)
│   │
│   ├── ResultView.vue (结果页面)
│   │   │
│   │   ├── SearchBar.vue (搜索栏)
│   │   ├── FilterPanel.vue (筛选面板)
│   │   ├── DataTable.vue (数据表格)
│   │   ├── Pagination.vue (分页)
│   │   └── EditDialog.vue (编辑对话框)
│   │
│   └── SettingsView.vue (设置页面)
│       │
│       ├── SideMenu.vue (侧边菜单)
│       │
│       └── ConfigPanel.vue (配置面板)
│           │
│           ├── AiConfigList.vue (AI 配置列表)
│           │   └── AiConfigItem.vue (单个配置项)
│           │
│           └── ConfigDialog.vue (配置对话框)
│
└── StatusBar.vue (状态栏)
```

### 6.2 状态管理（Pinia Stores）

```
┌─────────────────────────────────────────────────────────┐
│  Pinia Store 架构                                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  projectStore (项目管理状态)                   │   │
│  │  - projects: Project[]                          │   │
│  │  - currentProject: Project                      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  fieldStore (字段定义状态)                     │   │
│  │  - fields: Field[]                              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  processingStore (处理状态)                     │   │
│  │  - tasks: Task[]                                │   │
│  │  - selectedTaskId: string                       │   │
│  │  - currentSheet: string                         │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  resultStore (结果状态)                         │   │
│  │  - records: Record[]                            │   │
│  │  - total: number                                │   │
│  │  - page: number                                 │   │
│  │  - pageSize: number                             │   │
│  │  - filters: FilterOptions                       │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  configStore (配置状态)                         │   │
│  │  - configs: AiConfig[]                          │   │
│  │  - defaultConfigId: number                      │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

**详细的状态管理设计请参考**: dev.md 第 4.1.2 章

## 7. 关键交互流程

### 7.1 开始处理流程

```
用户点击 [选择文件]
         │
         ▼
系统打开文件选择对话框
         │
         ▼
用户选择文件/文件夹
         │
         ▼
前端调用: selectFiles() / selectFolder()
         │
         ▼
后端返回: 文件列表
         │
         ▼
前端显示: 文件列表（待处理状态）
         │
         ▼
用户点击 [开始处理]
         │
         ▼
前端调用: startProcessing(files, configId)
         │
         ▼
后端开始处理:
  1. 复制文件到 history/batch_XXX/
  2. 创建处理任务
  3. 启动异步处理线程
         │
         ▼
后端发送事件: processing-progress
         │
         ▼
前端监听事件: 更新进度显示
         │
         ▼
实时更新:
  - 文件列表中的进度条
  - 当前行的提取结果
  - Sheet 预览高亮
         │
         ▼
处理完成: 后端发送 processing-complete 事件
         │
         ▼
前端显示: 完成状态 + 统计信息
```

### 7.2 实时进度更新流程

```
后端处理线程
         │
         ▼
每处理一行数据
         │
         ▼
发送事件: app.emit_all("processing-progress", {
  task_id: "xxx",
  current_row: 123,
  total_rows: 5000,
  success_count: 120,
  failed_count: 3,
  current_sheet: "Sheet1",
  processing_speed: 120,
  current_extraction: {
    raw_data: "...",
    extracted: { name: "...", phone: "..." }
  }
})
         │
         ▼
前端监听: listen('processing-progress', (event) => {
  processingStore.updateProgress(event.payload)
})
         │
         ▼
更新 UI:
  1. 文件列表进度条
  2. Sheet 预览高亮当前行
  3. 提取结果显示
  4. 统计信息更新
```

## 8. 响应式设计

### 8.1 窗口尺寸适配

```
最小窗口尺寸: 1280 x 720
推荐窗口尺寸: 1920 x 1080

布局断点:
- < 1280px: 不支持（显示提示信息）
- 1280px - 1600px: 紧凑布局
- > 1600px: 标准布局

处理界面:
- 左侧文件列表: 固定 300px - 400px
- 右侧详情区域: 自适应剩余空间
  - Sheet 预览: 50%
  - 提取结果: 50%

结果页面:
- 表格宽度: 100%
- 列宽: 自适应内容
```

## 9. 主题和样式

### 9.1 颜色方案

```
主色调:
- Primary: #409EFF (蓝色)
- Success: #67C23A (绿色)
- Warning: #E6A23C (橙色)
- Danger: #F56C6C (红色)
- Info: #909399 (灰色)

背景色:
- 主背景: #F5F7FA
- 卡片背景: #FFFFFF
- 侧边栏: #F0F2F5

文字颜色:
- 主文字: #303133
- 次要文字: #606266
- 占位文字: #C0C4CC

边框颜色:
- 默认边框: #DCDFE6
- 分割线: #E4E7ED
```

### 9.2 字体规范

```
字体家族:
- 中文: "Microsoft YaHei", "微软雅黑", sans-serif
- 英文: "Helvetica Neue", Helvetica, Arial, sans-serif
- 代码: "Consolas", "Monaco", monospace

字体大小:
- 标题 H1: 24px
- 标题 H2: 20px
- 标题 H3: 16px
- 正文: 14px
- 小字: 12px
- 微小: 10px

行高:
- 标题: 1.5
- 正文: 1.6
- 代码: 1.4
```

## 10. 错误处理和提示

### 10.1 错误提示样式

```
┌─────────────────────────────────────────────┐
│  ⚠ 错误                              [×]    │
├─────────────────────────────────────────────┤
│                                             │
│  AI API 调用失败                            │
│                                             │
│  错误信息:                                  │
│  Connection timeout after 30 seconds        │
│                                             │
│  建议:                                      │
│  1. 检查网络连接                            │
│  2. 检查 API Key 是否正确                   │
│  3. 检查 API URL 是否可访问                 │
│                                             │
│  ┌─────────────┐  ┌─────────────┐          │
│  │   [重试]    │  │   [取消]    │          │
│  └─────────────┘  └─────────────┘          │
└─────────────────────────────────────────────┘
```

### 10.2 成功提示样式

```
┌─────────────────────────────────────────────┐
│  ✓ 成功                                     │
├─────────────────────────────────────────────┤
│  配置已保存                                 │
│  3 秒后自动关闭...                          │
└─────────────────────────────────────────────┘
```

## 11. 快捷键设计

```
全局快捷键:
- Ctrl/Cmd + N: 新建处理任务
- Ctrl/Cmd + O: 打开文件
- Ctrl/Cmd + S: 保存当前编辑
- Ctrl/Cmd + F: 搜索
- Ctrl/Cmd + ,: 打开设置
- Ctrl/Cmd + Q: 退出应用

处理界面:
- Space: 暂停/恢复处理
- Esc: 取消处理
- ↑/↓: 切换文件选择
- ←/→: 切换 Sheet

结果页面:
- Ctrl/Cmd + E: 导出数据
- Ctrl/Cmd + A: 全选
- Delete: 删除选中项
- Enter: 编辑选中项
```